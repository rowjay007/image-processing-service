# Server Configuration
PORT=8080
ENVIRONMENT=development
GIN_MODE=debug

# Supabase Configuration (PostgreSQL)
# Using Transaction Pooler (port 6543) for IPv4 compatibility
# Added default_query_exec_mode=simple_protocol for PgBouncer compatibility
SUPABASE_DB_URL=postgresql://postgres.jknkbjepryukxrkamdyc:!2H&mnXNVz5kf5t@aws-1-eu-west-1.pooler.supabase.com:6543/postgres?sslmode=require&default_query_exec_mode=simple_protocol
# Connection Pool Settings
DB_MAX_CONNS=25
DB_MIN_CONNS=5
DB_MAX_CONN_LIFETIME=1h
DB_MAX_CONN_IDLE_TIME=30m

# Upstash Redis Configuration
# Using the host from the REST URL and the token as password/token
UPSTASH_REDIS_HOST=noble-clam-11348.upstash.io
UPSTASH_REDIS_PORT=6380
UPSTASH_REDIS_PASSWORD=ASxUAAIncDJiNmQxY2IwZmY1YTI0OWRlYTRlZDVjZmEyMDkwNmMxMnAyMTEzNDg
UPSTASH_REDIS_TLS=true
# Keeping REST vars for potential future use (e.g. serverless usage)
UPSTASH_REDIS_REST_URL=https://noble-clam-11348.upstash.io
UPSTASH_REDIS_REST_TOKEN=ASxUAAIncDJiNmQxY2IwZmY1YTI0OWRlYTRlZDVjZmEyMDkwNmMxMnAyMTEzNDg

# Cloudinary Configuration
CLOUDINARY_CLOUD_NAME=dr9ibzuhn
CLOUDINARY_API_KEY=712185324454845
CLOUDINARY_API_SECRET=qFhbZBgY5cuAcGg461hHz0srQ-w
CLOUDINARY_FOLDER=image-processing-service
CLOUDINARY_SECURE=true
CLOUDINARY_USE_AUTO_FORMAT=true
CLOUDINARY_USE_AUTO_QUALITY=true

# CloudAMQP Configuration (RabbitMQ)
# Constructed from user details
CLOUDAMQP_URL=amqps://khrmykpc:HkWoqEQKTrxX1RFafnIhAiOpj1wPW4lY@collie.lmq.cloudamqp.com/khrmykpc
QUEUE_NAME=image-transform-jobs
QUEUE_DURABLE=true
QUEUE_PREFETCH_COUNT=5

# JWT Configuration
# Generated with openssl
JWT_SECRET=bwq6fq0R9wyhC0WMpOvyvX7d6JTzI6R0HR9Ofrc5tOpM39EF/qYVVp3nEIG9QDWGRDyznkMKRhtmcVtC4PryWg==
JWT_EXPIRY=15m
JWT_ISSUER=image-processing-service

# Application Limits
MAX_UPLOAD_SIZE=20971520 # 20MB
MAX_IMAGE_WIDTH=8000
MAX_IMAGE_HEIGHT=8000
RATE_LIMIT_UPLOADS=100
RATE_LIMIT_TRANSFORMS=500
RATE_LIMIT_WINDOW=1h

# Cors
ALLOWED_ORIGINS=*

# Logging
LOG_LEVEL=info