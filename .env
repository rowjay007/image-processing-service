# =============================================================================
# SERVER CONFIGURATION
# =============================================================================
PORT=8080
GIN_MODE=debug
ENVIRONMENT=development

# =============================================================================
# SUPABASE (PostgreSQL Database)
# =============================================================================
# User provided connection string
SUPABASE_DB_URL=postgresql://postgres:!2H&mnXNVz5kf5t@db.jknkbjepryukxrkamdyc.supabase.co:5432/postgres

# Database pool settings
DB_MAX_CONNS=25
DB_MIN_CONNS=5
DB_MAX_CONN_LIFETIME=1h
DB_MAX_CONN_IDLE_TIME=30m

# =============================================================================
# UPSTASH (Redis Cache)
# =============================================================================
UPSTASH_REDIS_HOST=PLACEHOLDER_UPSTASH_HOST
UPSTASH_REDIS_PORT=6380
UPSTASH_REDIS_PASSWORD=PLACEHOLDER_UPSTASH_PASSWORD
UPSTASH_REDIS_TLS=true

# Cache TTL settings
CACHE_VARIANT_METADATA_TTL=24h
CACHE_SIGNED_URL_TTL=5m
CACHE_RATE_LIMIT_TTL=1h

# =============================================================================
# CLOUDINARY (Object Storage & CDN)
# =============================================================================
CLOUDINARY_CLOUD_NAME=PLACEHOLDER_CLOUD_NAME
CLOUDINARY_API_KEY=PLACEHOLDER_API_KEY
CLOUDINARY_API_SECRET=PLACEHOLDER_API_SECRET

CLOUDINARY_FOLDER=image-processing-service
CLOUDINARY_SECURE=true
CLOUDINARY_USE_AUTO_FORMAT=true
CLOUDINARY_USE_AUTO_QUALITY=true

# =============================================================================
# CLOUDAMQP (RabbitMQ Queue)
# =============================================================================
CLOUDAMQP_URL=amqps://PLACEHOLDER_USER:PLACEHOLDER_PASSWORD@PLACEHOLDER_HOST.cloudamqp.com/PLACEHOLDER_VHOST

QUEUE_NAME=image-transform-jobs
QUEUE_DURABLE=true
QUEUE_PREFETCH_COUNT=5

# =============================================================================
# JWT AUTHENTICATION
# =============================================================================
JWT_SECRET=CHANGE_THIS_TO_A_SUPER_SECRET_RANDOM_STRING
JWT_EXPIRY=15m
JWT_ISSUER=image-processing-service

# =============================================================================
# APPLICATION LIMITS
# =============================================================================
MAX_UPLOAD_SIZE=20971520
MAX_IMAGE_WIDTH=8000
MAX_IMAGE_HEIGHT=8000
ALLOWED_MIME_TYPES=image/jpeg,image/png,image/webp,image/gif

RATE_LIMIT_UPLOADS=100
RATE_LIMIT_TRANSFORMS=500
RATE_LIMIT_WINDOW=1h

MAX_RESIZE_WIDTH=4000
MAX_RESIZE_HEIGHT=4000
MAX_QUALITY=100
MIN_QUALITY=1
DEFAULT_QUALITY=80

# =============================================================================
# OBSERVABILITY
# =============================================================================
LOG_LEVEL=info
LOG_FORMAT=json
METRICS_ENABLED=true
METRICS_PATH=/metrics

# =============================================================================
# WORKER CONFIGURATION
# =============================================================================
WORKER_ENABLED=true
WORKER_CONCURRENCY=5
WORKER_MAX_RETRIES=3
WORKER_RETRY_DELAY=5s

# =============================================================================
# CORS
# =============================================================================
CORS_ENABLED=true
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8080
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Origin,Content-Type,Authorization
CORS_MAX_AGE=12h